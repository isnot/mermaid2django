erDiagram
    series |o--o{ comic : "複数巻の作品の、シリーズ名"
    %% magazine_id 雑誌に載らないストーリー、掲載がない号もある
    magazine |o--o| story : "初出の掲載誌"
    magazine |o--o{ web_comic : "雑誌連載はWeb連載時には分割されている"
    story |o--|{ web_comic : "Web掲載された単話、単行本に未収録もあり"
    web_comic |o--o{ fragment : "ストーリー以外のWeb連載に登場した絵"
    comic |o--|{ story : ""
    journey ||--|{ story : "第〇旅が前後編に分割されるケース"
    journey }|--|{ venue : ""
    story |o--o{ fragment : "その他雑多な絵に関連する単話"
    story |o--o{ scene : ""
    story }|--|{ venue : ""
    story }|--|{ place : "ストーリー登場地点"
    %% camera_center_place_id
    place |o--|{ story : "ストーリー登場地点を含む領域(四角形)の中心座標"
    story }|--|{ route : ""
    story }|--|{ character : ""
    place }|--|{ route : ""
    venue ||--|{ place : ""
    venue |o--o{ scene : ""
    comic }o--o{ venue : ""
    place |o--o{ fragment : ""
    place |o--o{ scene : ""
    place |o--o{ tweet : ""
    place |o--o{ photo : ""
    character }|--|{ place : ""
    character }|--o{ fragment : ""
    character }|--o{ scene : ""
    user |o--o{ tweet : ""
    user |o--o{ photo : ""
    group }|--|{ user : "ユーザーは何れかのグループに所属する"


%% series
series {
    serial id PK
    %% 正確な作品の名称
    char title "作品名"
    %% 略称や通称で代表的なもの
    char short_title "略称"
    char author "著者名"
    %% 出版社 例：KADOKAWA
    char publisher "出版社"
    %% コミック・シリーズのレーベル名称 例：電撃コミックスNEXT
    char label "レーベル"
    %% 雑誌連載の誌名か、Web連載のレーベル名称
    char magazine_title "連載誌"
}

%% comic 単行本 1巻、2巻、…。単巻のみの場合はseries_id=NULL
comic {
    serial id PK
    %% series comic one2many
    rel series_id FK
    %% 第n巻
    int number
    %% 例：ざつ旅-That's Journey- 1
    char title "各巻タイトル"
    %% 特徴的な帯の文言
    char obi "オビ"
    %% 巻末の奥付にある、初版発行日
    date issued "発行日"
    date released "書店発売日"
    %% 版元ドットコムの書誌情報DBより
    url cover_image_url "書影url"
    char isbn "ISBN13"
}

%% web_comic Web連載 第1旅(1)、番外旅、一枚モノ、…
web_comic {
    serial id PK
    %% story web_comic one2many
    rel story_id FK
    %% magazine web_comic one2many
    rel magazine_id FK
    char title "各話の名前"
    int pages "ページ数"
    url cw_url "Comic Walker"
    date cw_published
    url nico_url "ニコニコ静画"
    date nico_published
    text memo
}

%% magazine 雑誌連載 マオウ
magazine {
    serial id PK
    %% 雑誌のタイトル 例：電撃マオウ 2020年1月号
    char title "タイトル"
    %% 書店等での発売日 ※タイトルの月の2か月前27日前後
    date released "発売日"
    text memo
}

%% fragment その他媒体 表紙カラー、店舗特典、ポスター。コミック収録と未収録がある
fragment {
    serial id PK
    %% story fragment one2many
    rel story_id FK
    %% web_comic fragment one2many
    rel web_comic_id FK
    %% character fragment many2many
    rel character FK
    %% place fragment one2many
    rel place_id FK
    char title
    url url
    text memo
}

%% journey 第〇旅、番外旅
journey {
    serial id PK
    char key
    %% 1:本編 2:番外旅 9:その他
    int type "タイプ"
    text memo
}

%% story 単行本の単話 第〇旅前編、第〇旅後編。コミック未収録もある
story {
    serial id PK
    %% magazine story one2one
    rel magazine_id FK
    %% comic story one2many
    rel comic_id FK
    %% journey story one2many
    rel journey_id FK
    char title
    char subtitle
    %% place story one2many このストーリーに登場する主な地点をすべて包含するような範囲（四角形）の中心
    rel camera_center_place_id FK
    int camera_zoom_level
}

%% venue 目的地 会津、松島、那須、…
venue {
    serial id PK
    %% journey venue many2many
    rel journey_id FK
    %% story venue many2many
    rel story_id FK
    %% comic venue many2many
    rel comic_id FK
    char name
}

%% place 場所 東京駅の顔出しパネル、登場店舗、宿泊場所、観光名所、施設、交通拠点
place {
    serial id PK
    %% venue place one2many
    rel venue_id FK
    %% story place many2many
    rel story_id FK
    %% character place many2many
    rel character_id FK
    char name
    char latitude
    char longitude
    char altitude
    text memo
}

%% route 経路 placeを組み合わせて経路とする
route {
    serial id PK
    %% story route many2many
    rel story_id FK
    %% place route many2many
    rel place_id FK
    char name
    text memo
}

%% character キャラクター 主要5人、編集部、他
character {
    serial id PK
    %% story character many2many
    rel story_id FK
    char name
    char type
    text description
}

%% scene シーン 名シーン、ざつ旅ARのマーカー
scene {
    serial id PK
    %% story scene one2many
    rel story_id FK
    %% venue scene one2many
    rel venue_id FK
    %% place scene one2many
    rel place_id FK
    %% character scene many2many
    rel character_id FK
    text memo
}

%% photo flickr (google place photo api有料)
photo {
    serial id PK
    %% place photo one2many
    rel place_id FK
    %% user photo one2many
    rel user_id FK
    url url
    int width
    int height
}

%% tweet Twitter 石坂さん、鈴ヶ森さん、読者等、無関係
tweet {
    serial id PK
    %% user tweet one2many
    rel user_id FK
    %% place tweet one2many
    rel place_id FK
    int type
    url url
    text description
}

%% user ユーザー 利用者
user {
    serial id PK
    %% group user many2many
    rel group_id FK
    char name
    int type
    text memo
}

%% group グループ
group {
    serial id PK
    char name
    int visibility
    text memo
}

%% role
%% permission 権限
